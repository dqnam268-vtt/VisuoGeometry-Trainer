<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARCADE TIN H·ªåC 6 - V√ï TR∆Ø·ªúNG TO·∫¢N</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap');

        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff00ff;
            --neon-green: #00ff00;
            --bg-color: #050510;
        }

        body {
            background-color: var(--bg-color);
            color: white;
            font-family: 'Roboto', sans-serif;
            margin: 0;
            overflow: hidden;
            user-select: none;
        }

        /* --- MAIN MENU --- */
        #main-menu {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: radial-gradient(circle, #1a1a40 0%, #000000 100%);
            z-index: 10;
        }

        h1.arcade-title {
            font-family: 'Press Start 2P', cursive;
            color: var(--neon-blue);
            text-shadow: 4px 4px var(--neon-pink);
            font-size: 40px; margin-bottom: 50px; text-align: center;
            line-height: 1.5;
        }

        .game-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 20px;
        }

        .game-card {
            background: linear-gradient(45deg, #222, #333);
            border: 2px solid var(--neon-blue);
            padding: 20px; width: 250px; height: 150px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s; border-radius: 15px;
            box-shadow: 0 0 10px var(--neon-blue);
        }

        .game-card:hover { transform: scale(1.05); background: #444; box-shadow: 0 0 20px var(--neon-pink); border-color: var(--neon-pink); }
        .game-icon { font-size: 40px; margin-bottom: 10px; }
        .game-name { font-family: 'Press Start 2P', cursive; font-size: 12px; color: white; text-align: center; line-height: 1.5; }

        /* --- COMMON GAME UI --- */
        .game-container { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #111; }
        .back-btn {
            position: absolute; top: 10px; left: 10px;
            background: #ff4444; color: white; border: none; padding: 10px 20px;
            font-family: 'Press Start 2P', cursive; font-size: 10px; cursor: pointer; z-index: 100;
        }

        /* --- GAME 1: RACER --- */
        #racer-canvas { display: block; margin: 0 auto; background: #333; border-left: 5px solid white; border-right: 5px solid white; }
        #racer-ui { position: absolute; top: 10px; right: 20px; font-family: 'Press Start 2P'; color: yellow; }
        #racer-question { 
            position: absolute; top: 50px; left: 50%; transform: translateX(-50%); 
            width: 80%; text-align: center; background: rgba(0,0,0,0.8); padding: 10px; 
            border: 1px solid white; font-weight: bold; font-size: 18px;
        }

        /* --- GAME 2: BOMB --- */
        #bomb-game { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; background: #220000; }
        .bomb-timer { font-size: 80px; font-family: 'Courier New', monospace; color: red; text-shadow: 0 0 20px red; margin-bottom: 20px; }
        .bomb-question { font-size: 24px; margin-bottom: 30px; text-align: center; max-width: 800px; }
        .wire-container { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
        .wire { 
            padding: 15px 30px; border-radius: 30px; cursor: pointer; font-weight: bold; font-size: 18px; 
            border: 4px solid rgba(0,0,0,0.3); transition: 0.2s; color: white; min-width: 200px; text-align: center;
        }
        .wire:hover { transform: scale(1.1); }
        
        /* --- GAME 3: MILLIONAIRE --- */
        #mil-game { display: flex; flex-direction: column; height: 100%; background: #000044; }
        .mil-screen { flex: 1; display: flex; align-items: center; justify-content: center; position: relative; }
        .mil-question-box { background: #000; border: 2px solid white; padding: 20px; width: 80%; text-align: center; font-size: 22px; border-radius: 20px; margin-bottom: 20px;}
        .mil-options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 90%; }
        .mil-opt { 
            background: linear-gradient(#000088, #000044); border: 2px solid #888; color: white; 
            padding: 15px; border-radius: 30px; cursor: pointer; text-align: left; font-size: 18px; 
        }
        .mil-opt:hover { background: #0000aa; border-color: orange; }
        .mil-ladder { position: absolute; right: 0; top: 50px; width: 150px; background: rgba(0,0,0,0.5); padding: 10px; text-align: right; font-family: 'Press Start 2P'; font-size: 10px; }
        .mil-ladder div { padding: 5px; color: orange; }
        .mil-ladder .active { color: white; background: orange; }

        /* --- GAME 4: LUCKY BOX --- */
        #box-game { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; background: #0d0d0d; }
        .box-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        .mystery-box { 
            width: 100px; height: 100px; background: goldenrod; border: 4px solid #fff; 
            display: flex; align-items: center; justify-content: center; font-size: 40px; 
            cursor: pointer; border-radius: 10px; animation: float 3s infinite ease-in-out;
        }
        @keyframes float { 0% {transform: translateY(0px);} 50% {transform: translateY(-10px);} 100% {transform: translateY(0px);} }
        .box-modal { 
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            background: #333; padding: 30px; border: 2px solid gold; border-radius: 10px; 
            width: 500px; text-align: center; box-shadow: 0 0 50px gold; z-index: 200;
        }

    </style>
</head>
<body>

    <div id="main-menu">
        <h1 class="arcade-title">ARCADE TIN H·ªåC 6<br><span style="font-size: 16px; color: white;">THCS V√ï TR∆Ø·ªúNG TO·∫¢N</span></h1>
        <div class="game-grid">
            <div class="game-card" onclick="startGame('racer')">
                <div class="game-icon">üèéÔ∏è</div>
                <div class="game-name">ƒêUA XE T·ªêC ƒê·ªò<br>(Ph·∫£n x·∫°)</div>
            </div>
            <div class="game-card" onclick="startGame('bomb')">
                <div class="game-icon">üí£</div>
                <div class="game-name">G·ª† BOM<br>(√Åp l·ª±c th·ªùi gian)</div>
            </div>
            <div class="game-card" onclick="startGame('millionaire')">
                <div class="game-icon">üí∞</div>
                <div class="game-name">AI L√Ä TRI·ªÜU PH√ö<br>(Ki·∫øn th·ª©c chu·∫©n)</div>
            </div>
            <div class="game-card" onclick="startGame('box')">
                <div class="game-icon">üéÅ</div>
                <div class="game-name">H·ªòP QU√Ä B√ç ·∫®N<br>(May m·∫Øn)</div>
            </div>
        </div>
    </div>

    <div id="game-racer" class="game-container">
        <button class="back-btn" onclick="showMenu()">‚Ü© QUAY L·∫†I</button>
        <div id="racer-ui">ƒêi·ªÉm: <span id="racer-score">0</span></div>
        <div id="racer-question">Chu·∫©n b·ªã...</div>
        <canvas id="racer-canvas"></canvas>
    </div>

    <div id="game-bomb" class="game-container">
        <button class="back-btn" onclick="showMenu()">‚Ü© QUAY L·∫†I</button>
        <div id="bomb-game">
            <div style="color:white; margin-bottom:10px">C·∫ÆT D√ÇY (ƒê√ÅP √ÅN) ƒê√öNG ƒê·ªÇ G·ª† BOM!</div>
            <div class="bomb-timer" id="bomb-timer">60.00</div>
            <div class="bomb-question" id="bomb-q-text">C√¢u h·ªèi...</div>
            <div class="wire-container" id="bomb-wires"></div>
        </div>
    </div>

    <div id="game-millionaire" class="game-container">
        <button class="back-btn" onclick="showMenu()">‚Ü© QUAY L·∫†I</button>
        <div id="mil-game">
            <div class="mil-ladder" id="mil-ladder"></div>
            <div class="mil-screen">
                <div style="width:100%; display:flex; flex-direction:column; align-items:center;">
                    <div class="mil-question-box" id="mil-q-text">C√¢u h·ªèi...</div>
                    <div class="mil-options" id="mil-options"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="game-box" class="game-container">
        <button class="back-btn" onclick="showMenu()">‚Ü© QUAY L·∫†I</button>
        <div id="box-game">
            <h2 style="color: gold; font-family: 'Press Start 2P'; margin-bottom: 30px;">CH·ªåN 1 H·ªòP QU√Ä</h2>
            <div class="box-grid" id="box-grid"></div>
        </div>
        <div id="box-modal" class="box-modal">
            <h3 id="box-q-text" style="color:white; margin-bottom:20px;">C√¢u h·ªèi</h3>
            <div id="box-options"></div>
        </div>
    </div>

<script>
    [cite_start]// --- DATABASE C√ÇU H·ªéI (L·∫•y t·ª´ PDF) [cite: 10-215] ---
    const rawQuestions = [
        { q: "D·ªØ li·ªáu l√† g√¨?", a: ["Con s·ªë, vƒÉn b·∫£n, h√¨nh ·∫£nh", "Gi√° tr·ªã s·ªë do ng∆∞·ªùi nghƒ© ra", "Ch·ªâ hi·ªÉu b·ªüi ng∆∞·ªùi gi·ªèi", "Ch·ªâ c√≥ trong m√°y t√≠nh"], c: 0 },
        { q: "Th√¥ng tin l√† g√¨?", a: ["Hi·ªÉu bi·∫øt v·ªÅ th·∫ø gi·ªõi", "V·∫≠t mang tin", "Ch·ªØ vi·∫øt", "D·ªØ li·ªáu trong m√°y"], c: 0 },
        { q: "Gi√°c quan thu nh·∫≠n th√¥ng tin?", a: ["Th√≠nh, th·ªã, x√∫c, kh·ª©u, v·ªã", "Th√≠nh, th·ªã, ƒëa gi√°c", "Th√≠nh, th·ªã, t√™ gi√°c", "Th√≠nh, th·ªã, x√∫c, gi√°c quan th·ª© 6"], c: 0 },
        { q: "X·ª≠ l√Ω th√¥ng tin l√†?", a: ["K·∫øt h·ª£p d·ªØ li·ªáu ra th√¥ng tin m·ªõi", "D√πng gi√°c quan", "V·∫≠t mang tin", "L∆∞u tr·ªØ d·ªØ li·ªáu"], c: 0 },
        { q: "Quan h·ªá Th√¥ng tin - D·ªØ li·ªáu?", a: ["Th√¥ng tin l√† k·∫øt qu·∫£ x·ª≠ l√Ω d·ªØ li·ªáu", "Kh√¥ng c√≥ ph√¢n bi·ªát", "D·ªØ li·ªáu ch·ªâ trong m√°y t√≠nh", "Mu·ªën c√≥ tin ph·∫£i m·∫•t ti·ªÅn"], c: 0 },
        { q: "Ch·ª©c nƒÉng c·ªßa USB, CD?", a: ["L∆∞u tr·ªØ th√¥ng tin", "X·ª≠ l√Ω th√¥ng tin", "Thu nh·∫≠n th√¥ng tin", "Trao ƒë·ªïi th√¥ng tin"], c: 0 },
        { q: "M√°y t√≠nh c√≥ th·ªÉ ... th√¥ng tin?", a: ["X·ª≠ l√Ω", "Ghi l·∫°i", "Truy·ªÅn t·∫£i", "T·∫•t c·∫£ ƒë·ªÅu ƒë√∫ng"], c: 0 }, // Modified slightly for gameplay
        { q: "Th·ª© t·ª± dung l∆∞·ª£ng tƒÉng d·∫ßn?", a: ["Bit, Byte, KB, MB", "Byte, Bit, KB, MB", "MB, KB, Byte, Bit", "Bit, Byte, MB, KB"], c: 0 },
        { q: "T·ªáp (File) l√† g√¨?", a: ["T·∫≠p h·ª£p th√¥ng tin c√≥ t√™n", "M·ªôt th∆∞ m·ª•c", "M·ªôt ch∆∞∆°ng tr√¨nh", "M·ªôt k√≠ t·ª±"], c: 0 },
        { q: "Th∆∞ m·ª•c d√πng ƒë·ªÉ l√†m g√¨?", a: ["Ch·ª©a t·ªáp v√† th∆∞ m·ª•c con", "Ch·ª©a m√£ nh·ªã ph√¢n", "L√† t·ªáp vƒÉn b·∫£n", "L√† b·ªô x·ª≠ l√Ω"], c: 0 },
        { q: "L·ª£i √≠ch m·∫°ng m√°y t√≠nh?", a: ["Chia s·∫ª d·ªØ li·ªáu", "M√°y ch·∫°y nhanh h∆°n", "Di·ªát virus", "Ti·∫øt ki·ªám ƒëi·ªán"], c: 0 },
        { q: "M·∫°ng m√°y t√≠nh l√† t·∫≠p h·ª£p m√°y t√≠nh...?", a: ["ƒê∆∞·ª£c k·∫øt n·ªëi", "ƒê∆∞·ª£c chia s·∫ª", "ƒê∆∞·ª£c l∆∞u tr·ªØ", "ƒê∆∞·ª£c x·ª≠ l√Ω"], c: 0 },
        { q: "Th√†nh ph·∫ßn m·∫°ng g·ªìm?", a: ["Thi·∫øt b·ªã ƒë·∫ßu cu·ªëi, m·∫°ng, truy·ªÅn d·∫´n", "M√°y t√≠nh, m√°y in", "M√°y ch·ªß, m√°y kh√°ch", "D√¢y ƒëi·ªán, ·ªï c·∫Øm"], c: 0 },
        { q: "M·∫°ng kh√¥ng d√¢y d√πng g√¨?", a: ["S√≥ng v√¥ tuy·∫øn", "C√°p quang", "D√¢y ƒëi·ªán", "C√°p m·∫°ng"], c: 0 },
        { q: "Wi-Fi l√† k·∫øt n·ªëi g√¨?", a: ["Kh√¥ng d√¢y", "C√≥ d√¢y", "C√°p quang", "ƒêi·ªán tho·∫°i"], c: 0 },
        { q: "Ki·ªÉm tra m·∫°ng Wi-Fi c·∫ßn xem?", a: ["T√≠n hi·ªáu Wi-Fi", "M√°y in", "·ªî c·ª©ng", "RAM"], c: 0 },
        { q: "Thu·∫≠t to√°n l√† g√¨?", a: ["D√£y b∆∞·ªõc gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ", "Ph·∫ßn m·ªÅm", "Thi·∫øt b·ªã", "Ng√¥n ng·ªØ l·∫≠p tr√¨nh"], c: 0 },
        { q: "Thu·∫≠t to√°n gi√∫p g√¨?", a: ["Gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ c√≥ h·ªá th·ªëng", "Gi·∫£i tr√≠", "TƒÉng t·ªëc m·∫°ng", "L∆∞u d·ªØ li·ªáu"], c: 0 },
        { q: "M√¥ t·∫£ thu·∫≠t to√°n b·∫±ng?", a: ["S∆° ƒë·ªì kh·ªëi ho·∫∑c ng√¥n ng·ªØ t·ª± nhi√™n", "√Çm thanh", "H√¨nh ·∫£nh", "Thi·∫øt b·ªã"], c: 0 },
        { q: "C·∫•u tr√∫c tu·∫ßn t·ª± l√†?", a: ["C∆° b·∫£n nh·∫•t", "Ph·ª©c t·∫°p nh·∫•t", "Kh√¥ng d√πng l·∫≠p tr√¨nh", "Ch·ªâ d√πng to√°n"], c: 0 },
        { q: "R·∫Ω nh√°nh x·∫£y ra khi c√≥?", a: ["ƒêi·ªÅu ki·ªán", "B∆∞·ªõc", "L·∫∑p", "Ng·∫´u nhi√™n"], c: 0 },
        { q: "H√¨nh ·∫£nh t·ªën dung l∆∞·ª£ng h∆°n vƒÉn b·∫£n v√¨?", a: ["M√£ h√≥a nhi·ªÅu chi ti·∫øt h∆°n", "Nhi·ªÅu m√†u", "Ph·ª©c t·∫°p h∆°n", "D·ªÖ m·∫•t"], c: 0 }
    ];

    let currentQuestions = [];
    
    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function getShuffledQuestion() {
        if (currentQuestions.length === 0) currentQuestions = [...rawQuestions];
        const qIndex = Math.floor(Math.random() * currentQuestions.length);
        const q = currentQuestions[qIndex];
        // Shuffle answers logic
        let answers = q.a.map((ans, i) => ({ text: ans, correct: i === q.c }));
        answers = shuffle(answers);
        return { q: q.q, answers: answers };
    }

    function showMenu() {
        stopAllGames();
        document.querySelectorAll('.game-container').forEach(el => el.style.display = 'none');
        document.getElementById('main-menu').style.display = 'flex';
    }

    function startGame(gameId) {
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('game-' + gameId).style.display = 'block';
        
        if (gameId === 'racer') initRacer();
        if (gameId === 'bomb') initBomb();
        if (gameId === 'millionaire') initMillionaire();
        if (gameId === 'box') initBox();
    }

    function stopAllGames() {
        // Stop loops/timers
        cancelAnimationFrame(racerReq);
        clearInterval(bombInterval);
    }

    /* ================= GAME 1: RACER LOGIC ================= */
    let racerReq;
    function initRacer() {
        const canvas = document.getElementById('racer-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 400; canvas.height = 600;
        
        let score = 0;
        let playerX = 1; // Lanes: 0, 1, 2
        let speed = 3;
        let lanes = [66, 200, 333]; // X coords
        let obstacles = [];
        let currentQ = null;
        let frame = 0;

        // Controls
        document.onkeydown = (e) => {
            if (e.key === 'ArrowLeft' && playerX > 0) playerX--;
            if (e.key === 'ArrowRight' && playerX < 2) playerX++;
        };

        function spawnObstacles() {
            currentQ = getShuffledQuestion();
            document.getElementById('racer-question').innerText = currentQ.q;
            
            // Create 3 "cars" falling, one for each lane
            for(let i=0; i<3; i++) {
                obstacles.push({
                    lane: i,
                    y: -100,
                    text: currentQ.answers[i] ? currentQ.answers[i].text : "---",
                    isCorrect: currentQ.answers[i] ? currentQ.answers[i].correct : false
                });
            }
        }

        spawnObstacles();

        function loop() {
            ctx.clearRect(0,0, canvas.width, canvas.height);
            
            // Draw Road
            ctx.fillStyle = "#555"; ctx.fillRect(0,0,400,600);
            ctx.fillStyle = "#fff"; 
            for(let i=0; i<600; i+=40) { ctx.fillRect(133, i + (frame%40) - 40, 4, 20); ctx.fillRect(266, i + (frame%40) - 40, 4, 20); }

            // Draw Player
            ctx.fillStyle = "cyan";
            ctx.shadowBlur = 10; ctx.shadowColor = "cyan";
            ctx.fillRect(lanes[playerX]-25, 500, 50, 80);
            ctx.shadowBlur = 0;

            // Draw Obstacles (Answers)
            let passed = false;
            for(let i=0; i<obstacles.length; i++) {
                let obs = obstacles[i];
                obs.y += speed;
                
                // Draw Box
                ctx.fillStyle = obs.isCorrect ? "#00aa00" : "#aa0000"; // Cheat color slightly visible? No, let's make them uniform until hit or make them random colors
                ctx.fillStyle = "#333";
                ctx.strokeStyle = "white";
                ctx.lineWidth = 2;
                ctx.fillRect(lanes[obs.lane]-40, obs.y, 80, 60);
                ctx.strokeRect(lanes[obs.lane]-40, obs.y, 80, 60);

                // Text
                ctx.fillStyle = "white";
                ctx.font = "10px Arial";
                ctx.textAlign = "center";
                // Wrap text logic simplified
                ctx.fillText(obs.text.substring(0, 15), lanes[obs.lane], obs.y + 20);
                ctx.fillText(obs.text.substring(15, 30), lanes[obs.lane], obs.y + 35);

                // Collision
                if (obs.y > 450 && obs.y < 580 && playerX === obs.lane) {
                    if (obs.isCorrect) {
                        score += 10;
                        obstacles = []; // Clear
                        spawnObstacles();
                    } else {
                        score = Math.max(0, score - 5);
                        obstacles = [];
                        spawnObstacles();
                    }
                }
                
                if (obs.y > 650) passed = true;
            }

            if (passed) {
                obstacles = [];
                spawnObstacles();
            }

            document.getElementById('racer-score').innerText = score;
            frame+= speed;
            racerReq = requestAnimationFrame(loop);
        }
        loop();
    }

    /* ================= GAME 2: BOMB LOGIC ================= */
    let bombInterval;
    function initBomb() {
        let time = 60.0;
        const timerEl = document.getElementById('bomb-timer');
        const wireCont = document.getElementById('bomb-wires');
        const qText = document.getElementById('bomb-q-text');

        function loadQ() {
            const data = getShuffledQuestion();
            qText.innerText = data.q;
            wireCont.innerHTML = '';
            
            // Colors for wires
            const colors = ["#d32f2f", "#1976d2", "#388e3c", "#fbc02d"];
            
            data.answers.forEach((ans, idx) => {
                const btn = document.createElement('div');
                btn.className = 'wire';
                btn.innerText = ans.text;
                btn.style.borderColor = colors[idx % 4];
                btn.style.color = colors[idx % 4];
                
                btn.onclick = () => {
                    if(ans.correct) {
                        // Correct
                        time = Math.min(60, time + 5);
                        timerEl.style.color = "#00ff00";
                        setTimeout(() => timerEl.style.color = "red", 200);
                        loadQ();
                    } else {
                        // Wrong
                        time -= 10;
                        timerEl.style.color = "white";
                        setTimeout(() => timerEl.style.color = "red", 200);
                    }
                };
                wireCont.appendChild(btn);
            });
        }

        loadQ();
        clearInterval(bombInterval);
        bombInterval = setInterval(() => {
            time -= 0.1;
            timerEl.innerText = time.toFixed(1);
            if(time <= 0) {
                clearInterval(bombInterval);
                alert("BOM ƒê√É N·ªî! H·∫øt gi·ªù.");
                showMenu();
            }
        }, 100);
    }

    /* ================= GAME 3: MILLIONAIRE LOGIC ================= */
    function initMillionaire() {
        const ladderEl = document.getElementById('mil-ladder');
        const qText = document.getElementById('mil-q-text');
        const optCont = document.getElementById('mil-options');
        let level = 1;
        
        // Build Ladder
        ladderEl.innerHTML = '';
        for(let i=10; i>=1; i--) {
            ladderEl.innerHTML += `<div id="lvl-${i}">C√¢u ${i}</div>`;
        }

        function loadLevel() {
            // Update Ladder Visual
            document.querySelectorAll('.mil-ladder div').forEach(d => d.classList.remove('active'));
            const activeDiv = document.getElementById(`lvl-${level}`);
            if(activeDiv) activeDiv.classList.add('active');

            if(level > 10) {
                alert("CH√öC M·ª™NG! B·∫†N L√Ä TRI·ªÜU PH√ö KI·∫æN TH·ª®C!");
                showMenu();
                return;
            }

            const data = getShuffledQuestion();
            qText.innerText = `C√¢u ${level}: ` + data.q;
            optCont.innerHTML = '';

            data.answers.forEach(ans => {
                const btn = document.createElement('div');
                btn.className = 'mil-opt';
                btn.innerText = ans.text;
                btn.onclick = () => {
                    if(ans.correct) {
                        level++;
                        loadLevel();
                    } else {
                        alert("Sai r·ªìi! B·∫°n d·ª´ng cu·ªôc ch∆°i t·∫°i c√¢u " + level);
                        showMenu();
                    }
                };
                optCont.appendChild(btn);
            });
        }
        loadLevel();
    }

    /* ================= GAME 4: LUCKY BOX LOGIC ================= */
    function initBox() {
        const grid = document.getElementById('box-grid');
        const modal = document.getElementById('box-modal');
        const qText = document.getElementById('box-q-text');
        const optCont = document.getElementById('box-options');
        
        grid.innerHTML = '';
        modal.style.display = 'none';

        // 16 Boxes
        for(let i=0; i<16; i++) {
            const box = document.createElement('div');
            box.className = 'mystery-box';
            box.innerText = "?";
            box.onclick = () => openBox(box);
            grid.appendChild(box);
        }

        function openBox(boxElement) {
            if(boxElement.style.background === 'gray') return; // Opened

            const data = getShuffledQuestion();
            modal.style.display = 'block';
            qText.innerText = data.q;
            optCont.innerHTML = '';

            data.answers.forEach(ans => {
                const btn = document.createElement('button');
                btn.style.display = 'block';
                btn.style.width = '100%';
                btn.style.margin = '10px 0';
                btn.style.padding = '10px';
                btn.style.cursor = 'pointer';
                btn.style.background = '#444';
                btn.style.color = 'white';
                btn.style.border = '1px solid gold';
                btn.innerText = ans.text;

                btn.onclick = () => {
                    if(ans.correct) {
                        alert("CH√çNH X√ÅC! B·∫°n nh·∫≠n ƒë∆∞·ª£c m·ªôt ph·∫ßn qu√† ·∫£o!");
                        boxElement.style.background = 'gray';
                        boxElement.innerText = "üéÅ";
                        boxElement.style.animation = 'none';
                    } else {
                        alert("Sai r·ªìi! H·ªôp qu√† b·ªã kh√≥a.");
                        boxElement.style.background = 'red';
                        boxElement.innerText = "üîí";
                    }
                    modal.style.display = 'none';
                };
                optCont.appendChild(btn);
            });
        }
    }

</script>
</body>
</html>